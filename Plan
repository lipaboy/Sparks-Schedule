1) Научимся перебирать все варианты
2) Уберём три смены подряд